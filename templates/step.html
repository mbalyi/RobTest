{% if editablestep %}
<table>
    <tr>
        <td>
            <button name='add_step' id='add_step' class='btn btn-default btn-sm'>Add Step</button>
        </td>
        <td>
            <button name='delete_step' id='delete_step' class='btn btn-default btn-sm' onclick="deleteStep()">Delete Step</button>
        </td>
        <td>
            <button name='up_step' id='up_step' class='btn btn-default btn-sm' onclick="moveStep('up')" disabled="true">Up</button>
        </td>
        <td>
            <button name='down_step' id='down_step' class='btn btn-default btn-sm' onclick="moveStep('down')" disabled="true">Down</button>
        </td>
    </tr>
</table>
<div class="case_table_no" id="fullWidth">
    <table style='width:100%'>
        <tr>
            <th style='width:50%'>Action</th>
            <th style='width:50%'>Result</th>
        </tr>
    </table>
    <div class='newStepPlace' ondrop='drop(event)' ondragover='allowDrop(event)' style='border-radius: 5px;'>
        {% for k in editablestep %}
        <div class="stepDragg" draggable="true" ondragstart="drag(event)" ondragover="dragHover(event)">
            <div style="width:100%;">
                <table style='width:100%'>
                    <tr id="fullWidth">
                        <td><a href='#' data-dbid='{{k[0]}}' id='{{k[0]}}' class='step' onclick='selectStep(event)'>#</a><td>
                        <td id="halfWidth-1">
                            <textarea name='action[]' class="action form-control" id='{{k[0]}}' rows="2" overflow="auto" onkeypress="reSizeTextarea(event)">{{k[1]}}</textarea>
                        </td>
                        <td id="halfWidth-1">
                            <textarea name='result[]' class="result form-control" rows="2" id='{{k[0]}}' overflow="hidden" onkeypress="reSizeTextarea(event)">{{k[2]}}</textarea>
                        </td>
                        <td>
                            <a href='#' data-dbid='' id='' class='step' onclick="removeStep(event)">
                                <span class="glyphicon glyphicon-remove" style="color:red;"></span>
                            </a>
                        </td>
                    </tr>
                </table>
                <div class="uploadContainer">
                        <form class="form-group" data-formid='newStepActionFile'  method="post" enctype="multipart/form-data" id="fullSize" onchange="loadFiles(event,'action')" style="display:none;">
                            <input type="file" name="fileToUploadStepAction" id="fileUploadStepAction" multiple>
                        <ul></ul>
                        </form>
                    </div>
                    <div class="uploadContainer">
                        <form class="form-group" data-formid='newStepResultFile'  method="post" enctype="multipart/form-data" id="fullSize" onchange="loadFiles(event,'result')" style="display:none;">
                            <input type="file" name="fileToUploadStepResult" id="fileUploadStepResult" multiple>
                        <ul></ul>
                        </form>
                    </div>
            </div>
            <!--
            <div style='height:30px;width:50%;padding-top:2px;float:left;'>
                <form class="form-group" data-formid='newStepActionFile'  method="post" enctype="multipart/form-data" style="width:100%;height:100%;" onchange="loadFilesUpdate(event,'action')">
                    <input type="file" name="fileToUploadStepAction" id="fileUploadStepAction" multiple>
                    <ul class="actionFiles">
                    {% for j in pics %}
                    {% if j[1] == k[0] and j[6]=="action" %}
                        <li data-fileid='{{j[5]}}'>{{j[5]}} {{j[3]}} 
                            <a href='#' data-fileurl='{{j[2]}}' onchange="deleteFilesStepMan(event)">
                                <span class="glyphicon glyphicon-remove" style="color:red;"></span>
                            </a>
                        </li>
                    {% endif %}
                    {% endfor %}
                    </ul>
                </form>
            </div>
            <div style='height:30px;width:50%;padding-top:2px;float:left;'>
                <form class="form-group" data-formid='newStepResultFile'  method="post" enctype="multipart/form-data" style="width:100%;height:100%;" onchange="loadFilesUpdate(event,'result')">
                    <input type="file" name="fileToUploadStepResult" id="fileUploadStepResult" multiple>
                    <ul class="resultFiles">
                        {% for j in pics %}
                        {% if j[1] == k[0] and j[6]=="result" %}
                        <li data-fileid='{{j[5]}}'>{{j[5]}} {{j[3]}}
                            <a href='#' data-fileurl='{{j[2]}}' onchange="deleteFilesStepMan(event)">
                                <span class="glyphicon glyphicon-remove" style="color:red;"></span>
                            </a>
                        </li>
                        {% endif %}
                        {% endfor %}
                    </ul>
                </form>
            </div>
            -->
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

{% if step %}
<table class='case_table_no table table-hover'>
	<tr>
		<th style="word-wrap:break-word;white-space:pre;">Action</th>
        <th style="word-wrap:break-word;white-space:pre;">Result</th>
    </tr>
		{% for k in step%}
		<tr>
			<td style="word-wrap:break-word;white-space:pre-line;">{{k[1]|safe}}</td>
			<td style="word-wrap:break-word;white-space:pre-line;">{{k[2]|safe}}</td>
        </tr>
		{% endfor %}
</table>
{% endif %}